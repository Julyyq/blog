<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JavaScript操作cookie</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="/stylesheets/custom.css">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>July的blog</h1>
        <p class="view">
            <a href="https://github.com/Julyyq/blog">View the Project on GitHub 
                <small>Julyyq/blog</small>
            </a>
        </p>
      </header>
      <dl class="new-cat">
        <dt>文章列表</dt>
        <dd><a href="/2012/10/20/js_example.html">快速实现轮播效果</a></dd>
        <dd><a href="/2012/10/01/html_doctype.html">HTML文档的标准模式和怪异模式</a></dd>
        <dd><a href="/2012/09/03/http_header.html">Http Header简单介绍</a></dd>
        <dd><a href="/2012/09/02/html_charset.html">给html设置charset属性</a></dd>
        <dd><a href="/2012/09/01/secret_of_JavaScript.html">JavaScript循环中的引用</a></dd>
        <dd><a href="/2012/08/25/use_JavaScript_operate_cookie.html">JavaScript操作cookie</a></dd>
      </dl>
      <section>
        <h2 id='javascriptcookie'>JavaScript操作cookie</h2>

<h3 id='1_cookie'>1. cookie是什么？</h3>

<blockquote>
<p>Cookie（复数形态Cookies），中文名称为小型文本文件或小甜饼，指某些网站为了辨别用户身份而储存在用户本地终端（Client Side）上的数据（通常经过加密）。<a href='http://zh.wikipedia.org/wiki/Cookie'>http://zh.wikipedia.org/wiki/Cookie</a></p>
</blockquote>

<p>那么cookie有什么用途呢？ http本身是无状态的，也就是说，每个页面都是“独立”存在的，可实际应用中我们往往需要知道“网页当前的状态”，比如用户在这个网页上登录了，那么在其它网页里肯定不能让用户再进行登录的操作，也就是需要将用户“已经登录的状态”保存起来，然后共享给网站的所有网页。那么这个状态保存在哪里呢？在这样的需求下，cookie应运而生。</p>

<h3 id='2_cookie'>2. cookie真面目</h3>

<p>我们打开京东官网，然后调出调试工具，在控制台里面输入<code>document.cookie</code>，结果看到以下内容：</p>

<p><img alt='京东网站首页cookie' src='/images/cookie.jpg' /></p>

<p>原来cookie竟然就是字符串！</p>

<p>仔细观察不难发现，这个字符串里都是形如&#8221;key=value&#8221;这样的东西，并且之间都以分号分割，没错，cookie就是以分号分割的形如key=value的字符串。</p>

<h3 id='3_cookie'>3. 如果操作cookie</h3>

<p>在JS中，以如下的方法设置cookie：</p>

<pre><code>document.cookie = &quot;key=value;expires=expiresDate;&quot;;</code></pre>

<p>其中，expires为此cookie过期的时间。</p>

<p>那么如果获取cookie呢？cookie本身就是字符串，所以想要获取cookie，其实就是需要对字符串进行处理，以获取我们想要的特定的值。</p>

<p>JS中对cookie就行相关操作的代码如下，代码最后包括了删除cookie的方法，原理就是让它马上过期。</p>

<pre><code>function setCookie(name, value, expires) {
  var expiresDate = new Date().getDate() + expires;
  document.cookie = name + &quot;=&quot; + value + &quot;;expires=&quot; + expiresDate;
}
function getCookie(name) {
  var arr = document.cookie.split(&quot;;&quot;),i;
  for(i=0;i&lt;arr.length;i++) {
    var arr2=arr[i].split(&quot;=&quot;);
    if(arr2[0]===name) return arr2[1];
  }
  return &quot;&quot;;
}
function removeCookie(name) {
  setCookie(name, &quot;&quot;, -1);
}</code></pre>

<p>全文完</p>
        <!-- 友言 BEGIN -->
        <div id="uyan_frame"></div>
        <script type="text/javascript" id="UYScript" src="http://v1.uyan.cc/js/iframe.js?UYUserId=1803257" async=""></script>
        <!-- 友言 END -->
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/Julyyq">Julyyq</a></p>
        <p>
            <small>Hosted on GitHub Pages &mdash; Theme by 
                <a href="https://github.com/orderedlist">orderedlist</a>
            </small>
        </p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>