<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JavaScript循环中的引用2</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="/stylesheets/custom.css">
    <meta name="viewport" content="target-densitydpi=320,width=480,user-scalable=no">
    <meta content="True" name="HandheldFriendly">
    <meta content="480" name="MobileOptimized">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <section>
        <h1 id="javascript循环中的引用2">JavaScript循环中的引用2</h1>

<p>这是携程网曾经用过的一道前端面试题：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>for(var i = 0;i&lt;5;i++) {
  setTimeout(function() {
    console.log(i)
  },1000)
}
</code></pre>
</div>

<p>问：这段程序最终将会输出什么？</p>

<p>JS中有很多类似于这样值得思考的小地方，如果没有电脑，需要你在纸上写出这道题的答案，这时候，我们就要像计算机一样去思考。</p>

<p>我们开始来分析这段程序，首先循环是什么？循环就是重复多次执行一段语句，在这个例子中，也就是执行了5次setTimeout，这意味着什么？这意味着一瞬间创建了5个定时器。其次，每个定时器都做了什么？很简单，在1秒钟之后输出i。</p>

<p>是的，整个分析就这么简单，在这段语句执行完之后，5个定时器同时输出i，此时，for循环已经执行完毕，i等于5，也就是输出了5个5。这里要注意不是5个4，因为i=4的时候，循环满足i小于5,还会执行一次，这次执行完之后，通过i++，i被赋值为5，虽然5小于5不成立，但是此时i的值已经是5了。</p>

<p>是不是有点像<a href="http://allenyoung.me/2012/09/01/secret_of_JavaScript.html">JavaScript循环中的引用</a>中所讲过的那样？</p>

<p>全文完</p>

      </section>
      <dl class="new-cat">
        <dt>文章列表</dt>
        <dd><a href="/2013/09/30/stylus_6.html">stylus教程6</a></dd>
        <dd><a href="/2013/09/30/stylus_5.html">stylus教程5</a></dd>
        <dd><a href="/2013/09/29/stylus_4.html">stylus教程4</a></dd>
        <dd><a href="/2013/09/29/stylus_3.html">stylus教程3</a></dd>
        <dd><a href="/2013/09/25/palindrome.html">判断是否回文数的Javascript实现</a></dd>
        <dd><a href="/2013/09/25/javascript_array_unique.html">使用JavaScript对数组去重</a></dd>
        <dd><a href="/2013/09/25/secret_of_JavaScript_2.html">JavaScript循环中的引用2</a></dd>
        <dd><a href="/2013/08/30/stylus_2.html">stylus教程2</a></dd>
        <dd><a href="/2013/08/29/stylus_1.html">stylus教程1</a></dd>
        <dd><a href="/2012/10/20/js_example.html">快速实现轮播效果</a></dd>
        <dd><a href="/2012/10/01/html_doctype.html">HTML文档的标准模式和怪异模式</a></dd>
        <dd><a href="/2012/09/03/http_header.html">Http Header简单介绍</a></dd>
        <dd><a href="/2012/09/02/html_charset.html">给html设置charset属性</a></dd>
        <dd><a href="/2012/09/01/secret_of_JavaScript.html">JavaScript循环中的引用</a></dd>
        <dd><a href="/2012/08/25/use_JavaScript_operate_cookie.html">JavaScript操作cookie</a></dd>
      </dl>
    </div>
  </body>
</html>