---
layout: default
title: stylus教程6
---
stylus教程6
===============

### 内置函数

和less以及sass一样，stylus也内置了很多函数，这些内置函数让stylus可以写的非常复杂。

这篇文章将挑选部分内置函数来探讨，全部内置函数请访问stylus官方文档<http://learnboost.github.io/stylus/docs/bifs.html>。

#### push(expr, args…)

将args合并到expr中。

    nums = 1 2
    push(nums, 3, 4, 5)

    nums
    // => 1 2 3 4 5

别名是append()。

#### unshift(expr, args…)

将args中的元素依此插入到expr前面。

    nums = 4 5
    unshift(nums, 3, 2, 1)

    nums
    // => 1 2 3 4 5

别名prepend()。

#### keys(pairs)

返回键值对的属性名称。

    pairs = (one 1) (two 2) (three 3)
    keys(pairs)
    // => one two three

#### values(pairs)

返回键值对的属性值。

    pairs = (one 1) (two 2) (three 3)
    values(pairs)
    // => 1 2 3

#### typeof(node)

以字符串形式返回node的类型。

type(12)
// => 'unit'

typeof(12)
// => 'unit'

typeof(#fff)
// => 'rgba'

type-of(#fff)
// => 'rgba'

别名有type和type-of。

#### unit(unit[, type])

设置或返回unit的类型。

    unit(10)
    // => ''

    unit(15in)
    // => 'in'

    unit(15%, 'px')
    // => 15px

    unit(15%, px)
    // => 15px

#### match(pattern, string)

测试string是否符合pattern。

    match('^foo(bar)?', foo)
    match('^foo(bar)?', foobar)
    // => true

    match('^foo(bar)?', 'foo')
    match('^foo(bar)?', 'foobar')
    // => true

    match('^foo(bar)?', 'bar')
    // => false

#### base-convert(num, base, width)

num为十进制数字，base为目标进制，范围是2到36，width代表转换后的位数，默认值是2。

#### join(delim, vals…)

这和javascript中的join函数一样。

    join(' ', 1 2 3)
    // => "1 2 3"

    join(',', 1 2 3)
    // => "1,2,3"

    join(', ', foo bar baz)
    // => "foo, bar, baz"

    join(', ', foo, bar, baz)
    // => "foo, bar, baz"

    join(', ', 1 2, 3 4, 5 6)
    // => "1 2, 3 4, 5 6"

#### unquote(str | ident)

将str解释为字面量。

#### s(fmt, …)

s()函数和unquote()很像，但是s()像C语言中的sprintf接受格式化的字符串。目前支持的分类符号是`%s`。

    s('bar()');
    // => bar()

    s('bar(%s)', 'baz');
    // => bar("baz")

    s('bar(%s)', baz);
    // => bar(baz)

    s('bar(%s)', 15px);
    // => bar(15px)

    s('rgba(%s, %s, %s, 0.5)', 255, 100, 50);
    // => rgba(255, 100, 50, 0.5)

    s('bar(%Z)', 15px);
    // => bar(%Z)

    s('bar(%s, %s)', 15px);
    // => bar(15px, null)

#### operate(op, left, right)

left和right分别是左右操作数,op为操作符。

    op = '+'
    operate(op, 15, 5)
    // => 20

#### length([expr])

返回expr的长度。

    length((1 2 3 4))
    // => 4

    length((1 2))
    // => 2

    length((1))
    // => 1

    length(())
    // => 0

    length(1 2 3)
    // => 3

    length(1)
    // => 1

    length()
    // => 0

#### last(expr)

返回表达式上一次的值。

    nums = 1 2 3
    last(nums)
    last(1 2 3)
    // => 3

    list = (one 1) (two 2) (three 3)
    last(list)
    // => (three 3)

#### image-size(path)

返回图片的宽和高。

#### add-property(name, expr)

给最近的块增加属性。

    something()
      add-property('bar', 1 2 3)
      s('bar')

    body
      foo: something()

编译为：

    body {
      bar: 1 2 3;
      foo: bar;
    }

全文完