---
layout: default
title: JavaScript循环中的引用2
---
JavaScript循环中的引用2
===============

这是携程网曾经用过的一道前端面试题：

    for(var i = 0;i<5;i++) {
      setTimeout(function() {
        console.log(i)
      },1000)
    }

问：这段程序最终将会输出什么？

JS中有很多类似于这样值得思考的小地方，如果没有电脑，需要你在纸上写出这道题的答案，这时候，我们就要像计算机一样去思考。

我们开始来分析这段程序，首先循环是什么？循环就是重复多次执行一段语句，在这个例子中，也就是执行了5次setTimeout，这意味着什么？这意味着一瞬间创建了5个定时器。其次，每个定时器都做了什么？很简单，在1秒钟之后输出i。

是的，整个分析就这么简单，在这段语句执行完之后，5个定时器同时输出i，此时，for循环已经执行完毕，i等于5，也就是输出了5个5。这里要注意不是5个4，因为i=4的时候，循环满足i<5,还会执行一次，这次执行完之后，通过i++，i被赋值为5，虽然5<5不成立，但是此时i的值已经是5了。

是不是有点像[JavaScript循环中的引用](http://koujiaoya.com/2012/09/01/secret_of_JavaScript.html)中所讲过的那样？

全文完